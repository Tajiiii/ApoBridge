<h2>新規サービス登録</h2>

<%= form_for(@service) do |f| %>
<%= render 'error_messages', service: @service %>
<div class="col-lg-4">
	<div class="new-service-image" style="margin-top: 30px;">
		<%= attachment_image_tag @service, :image, :fill, 300, 300, fallback: "noimage.jpg", size: "300x300", id: "img_prev" %>
		<br>
		<%= f.attachment_field :image, placeholder: "サービス画像" %>
	</div>
</div>
<div class="col-lg-4">
	<h3>サービス名</h3>
	<%= f.text_field :name, class:"text-field" %>

	<h3>カテゴリー</h3>
	<%= f.collection_select :category_id, Category.all, :id, :name, class:"text-field" %>

	<h3>料金</h3>
	<%= f.text_field :price, class:"text-field" %>

	<h3>対応エリア</h3>
	<%= f.text_field :area, class:"text-field" %>

	<h3>サービス説明</h3>
	<%= f.text_area :introduction, class:"text-field" %>

	<br><%= f.submit '登録する', class:"submit-btn" %>
</div>
<% end %>

<script>
$(function(){
    // inputのidから情報の取得
    $('#service_image').on('change', function (e) {
// ここから既存の画像のurlの取得
    var reader = new FileReader();
    reader.onload = function (e) {
        $(".image").attr('src', e.target.result);
    }
// ここまで
    reader.readAsDataURL(e.target.files[0]); //取得したurlにアップロード画像のurlを挿入
});
});

</script>
